<div 
  class="scroll-section"
  data-id="{step.id}"
  class:visible="step.isVisible">
  <form 
    class="bs-card white" 
    on:submit="handleSubmit(event)">
    <div class="card-section">
      <div class="card-heading">
        <slot name='heading'>
          <div>Heading</div>
        </slot>
      </div>
      <slot name='body'>
        <div>Body</div>
      </slot>
      <div class="card-footer">
        <slot name='footer'>
          <a href="/previous-step">Previous</a>
          <button type="submit" class="bs-btn">Next</button>
        </slot>
      </div>
    </div>
    <div 
      class:visible="step.isLoading"
      class="loading-section">
      <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 612 792" enable-background="new 0 0 612 792" xml:space="preserve">
        <g>
          <path d="M404.5,478.3c-8.1-10.5-23.4-12.6-33.6-4.2c-17.6,14.6-40.1,23.5-64.8,23.5c-49.3,0-90.3-35.1-99.6-81.7l34.6-3.1
            c2.6-0.2,3.9-3.2,2.3-5.3l-31.2-40.6l-31.7-41.3c-1.5-1.9-4.5-1.7-5.6,0.5l-23.8,46.2l-23.4,45.5c-1.2,2.3,0.6,5,3.2,4.8l27.5-2.5
            c11.6,71.1,73.1,125.5,147.5,125.5c36.2,0,69.2-12.9,95.1-34.3c9.8-8.1,11.3-22.6,3.6-32.7L404.5,478.3z"/>
          <path d="M480.9,369.3l-27.5,2.5c-11.6-71.1-73.1-125.5-147.5-125.5c-36.2,0-69.2,12.9-95.1,34.3c-9.8,8.1-11.3,22.6-3.6,32.7
            l0.3,0.4c8.1,10.5,23.4,12.6,33.6,4.2c17.6-14.6,40.1-23.5,64.8-23.5c49.3,0,90.3,35.1,99.6,81.7l-34.6,3.1
            c-2.6,0.2-3.9,3.2-2.3,5.3l31.2,40.6l31.7,41.3c1.5,1.9,4.5,1.7,5.6-0.5l23.8-46.2l23.4-45.5C485.3,371.8,483.5,369.1,480.9,369.3z
            "/>
        </g>
      </svg>
    </div>
  </form>
</div>

<style>
  .scroll-section { 
    opacity: 0; 
    height: 0; 
  }
  .scroll-section.visible { 
    opacity: 1; 
    height: auto;
  }
  .bs-card { 
    max-width: 670px;
    margin: 10px auto;
    text-align: center;
    padding: 0;
  }
  .bs-card .card-section { 
    padding: 0px 30px;
  }
  .card-heading { 
    font-size: 18px;
    font-weight: bold;
    border-bottom: 1px solid #eee;
    padding: 15px 0;
    margin-bottom: 10px;
  }
  .card-footer { 
    padding: 15px 10px;
    margin-top: 15px;
    border-top: 1px solid #eee;
  }
  form { 
    position: relative;
  }
  .loading-section { 
    visibility: hidden;
    position: absolute;
    top: 0; 
    left: 0; 
    bottom: 0; 
    right: 0; 
    background-color: rgba(255,255,255,0.7);
  }
  .loading-section.visible { 
    visibility: visible;
  }
  svg { 
    width: 150px;
    height: 150px;
    position: absolute; 
    left: 50%; 
    top: 50%; 
    transform: translate(-50%, -50%);
  }
  svg g { 
    animation: rotate 850ms infinite linear;
    transform-origin: 50% 50%;
  }
  @keyframes rotate { 
    0% { 
      transform: rotate(0deg);
    }
    100% { 
      transform: rotate(360deg);
    }
  }
</style>

<script>
  export default { 
    methods: { 
      handleSubmit(event) { 
        event.preventDefault();
        let { step, section } = this.get();
        this.store.stepSubmitted({step,section});
      }
    }
  }; 
</script>